<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="favicon.png">
  <title>RoAccounts - Shop</title>
  <link rel="stylesheet" href="theme.css">
  <style>
    @keyframes fadeIn { to { opacity: 1; } }
    body { opacity: 0; animation: fadeIn .5s ease forwards; }

    /* Shop grid */
    .shop-hero { text-align:center; padding: 48px 0 8px; }
    .products-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }
    @media (max-width: 980px) { .products-grid { grid-template-columns: 1fr 1fr; } }
    @media (max-width: 640px) { .products-grid { grid-template-columns: 1fr; } }

    .product-card .price { font-weight: 800; font-size: 18px; }
    .product-card .muted { margin: 8px 0 14px; }

    /* Cart drawer */
    .cart-toggle {
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 10px;
      background: #fff;
      border: 1px solid var(--border);
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
      color: var(--text);
    }
    .cart-count {
      background: var(--primary);
      color: #fff;
      min-width: 20px;
      height: 20px;
      padding: 0 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 800;
    }

    .cart-drawer {
      position: fixed;
      top: 0; right: 0; bottom: 0;
      width: 380px;
      max-width: 92vw;
      background: var(--surface);
      border-left: 1px solid var(--border);
      box-shadow: var(--shadow-lg);
      transform: translateX(100%);
      transition: transform .25s ease;
      z-index: 60;
      display: flex;
      flex-direction: column;
    }
    .cart-drawer.open { transform: translateX(0); }
    .cart-header { display:flex; align-items:center; justify-content:space-between; padding: 16px 18px; border-bottom: 1px solid var(--border); font-weight: 800; }
    .cart-body { padding: 16px 18px; overflow: auto; flex: 1; }
    .cart-footer { border-top: 1px solid var(--border); padding: 16px 18px; }

    .cart-item { display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 12px 0; }
    .cart-item + .cart-item { border-top: 1px solid var(--border); }
    .cart-item-title { font-weight: 700; }
    .qty-controls { display:inline-flex; align-items:center; gap: 8px; }
    .qty-btn { width: 28px; height: 28px; border-radius: 8px; border:1px solid var(--border); background:#fff; cursor:pointer; font-weight:800; }
    .remove-btn { border:none; background: transparent; color: var(--danger); font-weight:700; cursor:pointer; }

    .total-row { display:flex; align-items:center; justify-content:space-between; font-weight:800; margin-bottom: 12px; }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container site-header-inner">
      <div class="brand"><span class="dot"></span> RoAccounts</div>
      <nav class="site-nav">
        <a href="./index.html">Home</a>
        <a href="./Contact.html">Contact</a>
        <a href="./login.html">Login</a>
        <button id="openCart" class="cart-toggle" type="button" aria-haspopup="dialog" aria-controls="cartDrawer">
          Cart <span id="cartCount" class="cart-count">0</span>
        </button>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="shop-hero">
      <p class="pill mb-16"><span class="badge info">Shop</span> Roblox Accounts</p>
      <h1 class="hero-title">Choose your account</h1>
      <p class="hero-subtitle">Curated accounts ready for instant delivery after purchase.</p>
    </section>

    <section class="products-grid">
      <article class="card product-card floating">
        <div class="card-body">
          <h3 class="card-title">Headless Account</h3>
          <p class="muted">Roblox account with Headless bundle.</p>
          <div class="price mb-12">$50</div>
          <button class="btn btn-primary add-to-cart" data-id="headless" data-name="Headless Account" data-price="50">Add to cart</button>
        </div>
      </article>

      <article class="card product-card floating">
        <div class="card-body">
          <h3 class="card-title">Korblox Account</h3>
          <p class="muted">Roblox account with Korblox bundle.</p>
          <div class="price mb-12">$20</div>
          <button class="btn btn-primary add-to-cart" data-id="korblox" data-name="Korblox Account" data-price="20">Add to cart</button>
        </div>
      </article>

      <article class="card product-card floating">
        <div class="card-body">
          <h3 class="card-title">Headless/Korblox Account</h3>
          <p class="muted">Roblox account with both Headless and Korblox.</p>
          <div class="price mb-12">$85</div>
          <button class="btn btn-primary add-to-cart" data-id="combo" data-name="Headless/Korblox Account" data-price="85">Add to cart</button>
        </div>
      </article>
    </section>
  </main>

  <aside id="cartDrawer" class="cart-drawer" role="dialog" aria-modal="true" aria-label="Shopping cart">
    <div class="cart-header">
      <div>Shopping cart</div>
      <button id="closeCart" class="btn btn-outline" type="button">Close</button>
    </div>
    <div id="cartBody" class="cart-body">
      <!-- Items rendered by JS -->
    </div>
    <div class="cart-footer">
      <div class="total-row"><span>Total</span><span id="cartTotal">$0</span></div>
      <button id="checkoutBtn" class="btn btn-primary" style="width:100%">Proceed to checkout</button>
    </div>
  </aside>

  <footer class="footer">
    <div class="container">&copy; 2025 RoAccounts. Not affiliated with Roblox Corporation.</div>
  </footer>

  <script>
    const CART_KEY = 'cart';

    function loadCart() {
      try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; } catch { return []; }
    }
    function saveCart(items) {
      localStorage.setItem(CART_KEY, JSON.stringify(items));
    }
    function getCartCount(items) {
      return items.reduce((sum, it) => sum + it.quantity, 0);
    }
    function getCartTotal(items) {
      return items.reduce((sum, it) => sum + it.price * it.quantity, 0);
    }

    function renderCart() {
      const items = loadCart();
      const body = document.getElementById('cartBody');
      const countEl = document.getElementById('cartCount');
      const totalEl = document.getElementById('cartTotal');

      countEl.textContent = getCartCount(items);
      totalEl.textContent = `$${getCartTotal(items).toFixed(2)}`;

      if (items.length === 0) {
        body.innerHTML = '<p class="muted">Your cart is empty.</p>';
        return;
      }

      body.innerHTML = items.map(item => `
        <div class="cart-item" data-id="${item.id}">
          <div>
            <div class="cart-item-title">${item.name}</div>
            <div class="muted">$${item.price.toFixed(2)}</div>
          </div>
          <div class="qty-controls">
            <button class="qty-btn" data-action="decrement">-</button>
            <span aria-live="polite">${item.quantity}</span>
            <button class="qty-btn" data-action="increment">+</button>
            <button class="remove-btn" data-action="remove">Remove</button>
          </div>
        </div>
      `).join('');
    }

    function addToCart(product) {
      const items = loadCart();
      const existing = items.find(it => it.id === product.id);
      if (existing) existing.quantity += 1; else items.push({ ...product, quantity: 1 });
      saveCart(items);
      renderCart();
    }

    function updateQuantity(id, delta) {
      let items = loadCart();
      items = items.map(it => it.id === id ? { ...it, quantity: Math.max(1, it.quantity + delta) } : it);
      saveCart(items);
      renderCart();
    }

    function removeFromCart(id) {
      const items = loadCart().filter(it => it.id !== id);
      saveCart(items);
      renderCart();
    }

    function openCart() { document.getElementById('cartDrawer').classList.add('open'); }
    function closeCart() { document.getElementById('cartDrawer').classList.remove('open'); }

    document.addEventListener('DOMContentLoaded', () => {
      // Wire add-to-cart buttons
      document.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', () => {
          const product = {
            id: btn.dataset.id,
            name: btn.dataset.name,
            price: Number(btn.dataset.price)
          };
          addToCart(product);
          openCart();
        });
      });

      // Cart open/close
      document.getElementById('openCart').addEventListener('click', openCart);
      document.getElementById('closeCart').addEventListener('click', closeCart);

      // Delegate qty/remove in cart
      document.getElementById('cartBody').addEventListener('click', (e) => {
        const actionBtn = e.target.closest('button');
        if (!actionBtn) return;
        const itemEl = e.target.closest('.cart-item');
        if (!itemEl) return;
        const id = itemEl.getAttribute('data-id');
        const action = actionBtn.getAttribute('data-action');
        if (action === 'increment') updateQuantity(id, +1);
        if (action === 'decrement') updateQuantity(id, -1);
        if (action === 'remove') removeFromCart(id);
      });

      // Checkout
      document.getElementById('checkoutBtn').addEventListener('click', () => {
        const items = loadCart();
        if (items.length === 0) return;
        // Save primary selection for checkout page compatibility
        const primary = items[0]?.id || 'headless';
        localStorage.setItem('selectedProductKey', primary);
        window.location.href = './checkout.html';
      });

      renderCart();
    });
  </script>
</body>
</html>

