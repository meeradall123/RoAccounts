<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pay with FiPay</title>
  <link rel="stylesheet" href="theme.css">
  <style>
    @keyframes fadeIn { to { opacity: 1; } }
    @keyframes fadeOut { to { opacity: 0; } }
    body { opacity: 0; animation: fadeIn .6s ease forwards; }
    body.fade-out { animation: fadeOut .6s ease forwards; }
  </style>
</head>
<body class="brand-ebay">
  <header class="site-header">
    <div class="container site-header-inner">
      <div class="brand"><span class="dot"></span> FiPay Checkout</div>
      <nav class="site-nav">
        <a href="./Products.html">Shop</a>
        <a href="./Contact.html">Support</a>
      </nav>
    </div>
  </header>

  <main class="container" style="padding-top:24px; padding-bottom:24px;">
    <div class="grid-2">
      <section class="card floating">
        <div class="card-header">Choose how to pay</div>
        <div class="card-body">
          <div class="payment-methods mb-16">
            <label class="payment-option">
              <input type="radio" name="method" value="card" checked>
              <strong>Credit or debit card</strong>
            </label>
            <label class="payment-option">
              <input type="radio" name="method" value="paypal" disabled>
              <span class="muted">PayPal (coming soon)</span>
            </label>
          </div>

          <div id="card-form">
            <div class="form-field">
              <label class="label" for="FULLNAME">Name on card</label>
              <input class="input" type="text" id="FULLNAME" placeholder="John A. Doe">
            </div>

            <div class="form-field">
              <label class="label" for="EmailAddress">Email for receipt (optional)</label>
              <input class="input" type="email" id="EmailAddress" placeholder="john@example.com">
            </div>

            <div class="form-field">
              <label class="label" for="CreditCardNumber">Card number</label>
              <input class="input" type="text" id="CreditCardNumber" inputmode="numeric" autocomplete="off" placeholder="1234 1234 1234 1234" maxlength="19">
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 12px;" class="mb-16">
              <div class="form-field" style="margin-bottom:0;">
                <label class="label" for="MMYY">Expiry</label>
                <input class="input" type="text" id="MMYY" placeholder="MM/YY" maxlength="5">
              </div>
              <div class="form-field" style="margin-bottom:0;">
                <label class="label" for="CVC">Security code</label>
                <input class="input" type="text" id="CVC" placeholder="CVC" maxlength="3" inputmode="numeric" autocomplete="off">
              </div>
            </div>

            <div class="small muted mb-16">This is a demo UI and does not process real payments.</div>
            <button id="payBtn" class="btn btn-primary" style="width:100%">Confirm and pay</button>
            <div id="notice" class="small muted mt-12" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <aside class="card floating order-summary">
        <div class="card-header">Order summary</div>
        <div class="card-body">
          <div style="display:flex; gap:12px; align-items:center;" class="mb-16">
            <div style="width:64px; height:64px; background:#f2f4f7; border-radius:12px; display:flex; align-items:center; justify-content:center; font-weight:800; color:#98a2b3;">RA</div>
            <div style="flex:1;">
              <div style="font-weight:700;">Selected account</div>
              <div class="muted small">Digital item • Instant delivery</div>
            </div>
            <div class="price">$50.00</div>
          </div>

          <ul class="list mb-16">
            <li><span>Subtotal</span><span>$50.00</span></li>
            <li><span>Shipping</span><span>Free</span></li>
            <li><span>Tax</span><span>$0.00</span></li>
          </ul>
          <div style="display:flex; justify-content: space-between; align-items:center;" class="mb-16 total">
            <span>Total</span>
            <span>$50.00</span>
          </div>

          <div class="form-field">
            <label class="label" for="coupon">Apply coupon (optional)</label>
            <input id="coupon" class="input" placeholder="Enter code">
          </div>

          <div class="mt-16 small muted">Need help? <a href="./Contact.html">Contact support</a></div>
        </div>
      </aside>
    </div>
  </main>

  <footer class="footer">
    <div class="container">&copy; 2025 RoAccounts • FiPay UI demo</div>
  </footer>

  <script>
    function showNotification(message) {
      const notice = document.getElementById('notice');
      notice.textContent = message;
    }
    function validateExpiry(mmYY) {
      if (mmYY.length !== 5 || mmYY[2] !== '/') return false;
      const [month, year] = mmYY.split('/').map(Number);
      const now = new Date();
      const currentYear = now.getFullYear() % 100;
      const currentMonth = now.getMonth() + 1;
      return month >= 1 && month <= 12 && ((year > currentYear) || (year === currentYear && month >= currentMonth));
    }

    // Basic client-side formatting/validation only; no network calls
    document.getElementById('MMYY').addEventListener('input', function () {
      let val = this.value.replace(/[^\d]/g, '');
      if (val.length > 2) val = val.slice(0,2) + '/' + val.slice(2,4);
      this.value = val.slice(0,5);
    });
    document.getElementById('CVC').addEventListener('input', function () {
      this.value = this.value.replace(/\D/g, '').slice(0,3);
    });
    document.getElementById('CreditCardNumber').addEventListener('input', function () {
      let val = this.value.replace(/\D/g, '').slice(0,16);
      this.value = val.replace(/(\d{4})(?=\d)/g, '$1 ').trim();
    });

    document.getElementById('payBtn').addEventListener('click', function () {
      const card = document.getElementById('CreditCardNumber').value.replace(/\s/g, '');
      const mmYY = document.getElementById('MMYY').value.trim();
      const cvc = document.getElementById('CVC').value.trim();
      if (!/^\d{16}$/.test(card)) { showNotification('Please enter a valid 16-digit card number.'); return; }
      if (!validateExpiry(mmYY)) { showNotification('Please enter a valid expiry (MM/YY).'); return; }
      if (!/^\d{3}$/.test(cvc)) { showNotification('Please enter a valid 3-digit CVC.'); return; }
      showNotification('Processing your order...');
      document.body.classList.add('fade-out');
      setTimeout(() => { window.location.href = './PaymentDeclined.html'; }, 700);
    });
  </script>
</body>
</html>
